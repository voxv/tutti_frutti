import{A as h,t as n}from"./index-CvieRnPL.js";class l extends h{constructor(e={}){let t={range:120,fireRate:1,damage:1,cost:200,type:"knife"};n&&n.knife&&(t={...t,...n.knife}),super({...t,...e,type:"knife"})}applyUpgrade(e){e==="faster_blades"?(this.fireRate+=5,this._animationSpeedMultiplier=(this._animationSpeedMultiplier||1)*1.2,this._placedSprite&&this._placedSprite.anims&&(this._placedSprite.anims.timeScale=this._animationSpeedMultiplier)):e==="blade_master"?(this.maxBloonsPerAttack=2,this._animationSpeedMultiplier=(this._animationSpeedMultiplier||1)*1.5,this._placedSprite&&this._placedSprite.anims&&(this._placedSprite.anims.timeScale=this._animationSpeedMultiplier)):e==="sharper_blade"?(this.damage=1,this._sharperBlade=!0):e==="bigger_range"?(this.range+=10,this._placedSprite&&this._placedSprite.towerRange!==void 0&&(this._placedSprite.towerRange=this.range)):e==="even_bigger_range"?(this.range+=10,this._placedSprite&&this._placedSprite.towerRange!==void 0&&(this._placedSprite.towerRange=this.range)):e==="storm_spin"?(this.maxBloonsPerAttack=2,this._stormSpinActive=!0):e==="blade_master"&&(this.maxBloonsPerAttack=2),(this._stormSpin||this._bladeMaster)&&(this.maxBloonsPerAttack=2),this.upgrades.push(e)}update(e,t){super.update&&super.update(e,t),this._placedSprite&&this._stormSpinActive&&(this._placedSprite.anims&&this._placedSprite.anims.isPlaying&&this._placedSprite.stop(),this._placedSprite.frame&&this._placedSprite.frame.name!==0&&this._placedSprite.setFrame&&this._placedSprite.setFrame(0),Array.isArray(t)&&(t.some(a=>a.isActive&&this.isInRange(a))?this._placedSprite.rotation+=.7:this._placedSprite.rotation=0))}static placeOnScene(e,t,s){const a=e&&e.cache&&e.cache.json&&e.cache.json.get?e.cache.json.get("tower"):null;let p=120;a&&a.knife&&a.knife.range&&(p=a.knife.range);const r=new l({position:{x:t,y:s}}),o=220/2,i=e.add.sprite(t,s,"knife_tower_anim",0).setOrigin(.5,.5).setDisplaySize(o*.8,100*.8).setDepth(1001).setAlpha(1).setInteractive({useHandCursor:!0});return i.setFrame(0),i.stop(),i.anims&&(i.anims.timeScale=1),i.towerType="knife_tower",i.towerX=t,i.towerY=s,i.towerRange=p,r._placedSprite=i,r._animationSpeedMultiplier=1,r}}export{l as KnifeTower};
