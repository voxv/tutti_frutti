class i{static placeOnScene(t,e,s){return new i(t,e,s)}constructor(t,e,s){this.scene=t,this.x=e,this.y=s,this.active=!0,this.exploded=!1,this.sprite=t.add.sprite(e,s,"bomb_trap"),this.sprite.setDisplaySize(69,69),this.sprite.setDepth(9e3),this.sprite.setOrigin(.5,.5),this.sprite.bombRef=this,this._placedSprite=this.sprite,this.towerType="bomb_trap",this.unlockedUpgrades={left:0,right:0},this._flashState=!1,this._flashInterval=setInterval(()=>{this.sprite&&(this._flashState=!this._flashState,this._flashState?this.sprite.setTint(16720418):this.sprite.clearTint())},120),this._explodeTimeout=setTimeout(()=>{this.explode()},2e3)}update(){}explode(){if(!(!this.active||this.exploded)&&(this.exploded=!0,this.active=!1,this._flashInterval&&(clearInterval(this._flashInterval),this._flashInterval=null),this.sprite)){this.sprite.clearTint(),this.sprite.setTexture("bomb_anim"),typeof this.sprite.play=="function"&&this.sprite.play("bomb_idle"),this.scene.sound&&typeof this.scene.sound.play=="function"&&this.scene.sound.play("boom");const t=this.scene.anims.get("bomb_idle"),e=t?t.frames.length/(t.frameRate||1)*1e3:400;setTimeout(()=>{this.destroy()},e)}}destroy(){this.active=!1,this._explodeTimeout&&(clearTimeout(this._explodeTimeout),this._explodeTimeout=null),this._flashInterval&&(clearInterval(this._flashInterval),this._flashInterval=null),this.sprite&&(this.sprite.destroy(),this.sprite=null)}}export{i as BombTrap};
