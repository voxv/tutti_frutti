import{A as h,t as n}from"./index-C8cSIBdZ.js";class l extends h{constructor(e={}){let i={range:120,fireRate:1,damage:1,cost:200,type:"knife"};n&&n.knife&&(i={...i,...n.knife}),super({...i,...e,type:"knife"})}applyUpgrade(e){e==="faster_blades"?(this.fireRate+=5,this._animationSpeedMultiplier=(this._animationSpeedMultiplier||1)*1.2,this._placedSprite&&this._placedSprite.anims&&(this._placedSprite.anims.timeScale=this._animationSpeedMultiplier)):e==="blade_master"?(this.maxBloonsPerAttack=2,this._animationSpeedMultiplier=(this._animationSpeedMultiplier||1)*1.5,this._placedSprite&&this._placedSprite.anims&&(this._placedSprite.anims.timeScale=this._animationSpeedMultiplier)):e==="sharper_blade"?(this.damage=1,this._sharperBlade=!0):e==="bigger_range"?(this.range+=10,this._placedSprite&&this._placedSprite.towerRange!==void 0&&(this._placedSprite.towerRange=this.range)):e==="even_bigger_range"?(this.range+=10,this._placedSprite&&this._placedSprite.towerRange!==void 0&&(this._placedSprite.towerRange=this.range)):e==="storm_spin"?(this.maxBloonsPerAttack=2,this._stormSpinActive=!0):e==="blade_master"&&(this.maxBloonsPerAttack=2),(this._stormSpin||this._bladeMaster)&&(this.maxBloonsPerAttack=2),this.upgrades.push(e)}update(e,i){super.update&&super.update(e,i),this._placedSprite&&this._stormSpinActive&&(this._placedSprite.anims&&this._placedSprite.anims.isPlaying&&this._placedSprite.stop(),this._placedSprite.frame&&this._placedSprite.frame.name!==0&&this._placedSprite.setFrame&&this._placedSprite.setFrame(0),Array.isArray(i)&&(i.some(a=>a.isActive&&this.isInRange(a))?this._placedSprite.rotation+=.7:this._placedSprite.rotation=0))}static placeOnScene(e,i,s){const a=e&&e.cache&&e.cache.json&&e.cache.json.get?e.cache.json.get("tower"):null;let p=120;a&&a.knife&&a.knife.range&&(p=a.knife.range);const r=new l({position:{x:i,y:s}}),o=220/2,t=e.add.sprite(i,s,"knife_tower_anim",0).setOrigin(.5,.5).setDisplaySize(o*.8,100*.8).setDepth(1001).setAlpha(1).setInteractive({useHandCursor:!0});return t.setFrame(0),t.stop(),t.anims&&(t.anims.timeScale=1),t.towerType="knife_tower",t.towerX=i,t.towerY=s,t.towerRange=p,r._placedSprite=t,r._animationSpeedMultiplier=1,r}}export{l as KnifeTower};
